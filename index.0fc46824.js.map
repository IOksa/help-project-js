{"mappings":"gBAYAA,EAAe,CAACC,cAVhB,WACI,OAAOC,MAAM,GAAYC,OAHd,wDAIVC,MAAK,SAACC,GACH,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAEvB,OAAOH,EAAKI,M,UCIpBC,EAAe,CAACC,cAVhB,SAAuBC,GACnB,OAAOV,MAAM,GAAeC,OAHjB,6CAGc,KAAUA,OAAPS,IAC3BR,MAAK,SAACC,GACH,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAEvB,OAAOH,EAAKI,M,MCLdI,EAAK,CACPC,GAAIC,SAASC,cAAc,eAC3BC,cAAeF,SAASC,cAAc,+BACtCE,SAAUH,SAASC,cAAc,iBA8DnC,SAASG,IACPC,OAAOC,oBAAoB,UAAWC,GACtCP,SAASQ,KAAKC,UAAUC,OAAO,a,CAUjC,SAASH,EAAcI,GACA,WACJA,EAAMC,MAGrBR,G,CA5ENS,QAAQC,IAAIhB,EAAKI,eACjBW,QAAQC,IAAIhB,EAAKK,UAEjBL,EAAKC,GAAGgB,iBAAiB,SAyBzB,SAAiCJ,GAI7B,GAHAA,EAAMK,kBAEiBL,EAAMM,OAAOR,UAAUS,SAAS,kBAEnD,OAEJL,QAAQC,IAAIH,EAAMM,OAAOE,QAAQC,QAILvB,EAHLc,EAAMM,OAAOE,QAAQC,OAI5CP,QAAQC,IAAI,0BAEZnB,EAAGC,cAAcC,GAAQR,MAAK,SAAAgC,G,OAAKR,QAAQC,IAAIO,E,IAC9CC,OAAM,SAAAC,G,OAAKV,QAAQC,IAAI,+B,IAQxBT,OAAOU,iBAAiB,UAAWR,GACnCP,SAASQ,KAAKC,UAAUe,IAAI,cAE5BX,QAAQC,IAAI,eAfhB,IAAgCjB,C,IAlChCC,EAAKK,SAASY,iBAAiB,SA2D7B,SAAyBJ,GACnBA,EAAMc,gBAAkBd,EAAMM,SAChCJ,QAAQC,IAAI,iCACZV,I,IA3DNnB,EAAIC,gBAAgBG,MAGpB,SAAkCqC,GAC9Bb,QAAQC,IAAI,2BAA2BY,GACvCb,QAAQC,IAAIY,EAAI,GAAGC,MAAM,IACzB,IAAMC,EAAOF,EAAI,GAAGC,MAAME,KACtB,SAAAC,G,IACAC,EAAGD,EAAHC,IACAC,EAAUF,EAAVE,WACAC,EAAgBH,EAAhBG,iBACAC,EAAiBJ,EAAjBI,kB,MAEA,4DAAyF9C,OAA7B4C,EAAW,oBAAiD5C,OAA/B6C,EAAiB,gBAAmD7C,OAArC8C,EAAkB,qBAAuB9C,OAAJ2C,EAAI,gB,IAElKI,KAAK,IACNtB,QAAQC,IAAIc,GACZ9B,EAAKC,GAAGqC,UAAUR,C","sources":["src/fetchTopBooks.js","src/fetchbyid.js","src/index.js"],"sourcesContent":["const BASE_URL='https://books-backend.p.goit.global/books/top-books';\n\nfunction fetchTopBooks(){\n    return fetch(`${BASE_URL}`)\n    .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(resp.statusText);\n        } \n        return resp.json();\n      });\n}\n\nexport default {fetchTopBooks};","const BASE_URL='https://books-backend.p.goit.global/books/';\n\nfunction fetchBookById(idBook){\n    return fetch(`${BASE_URL}/${idBook}`)\n    .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(resp.statusText);\n        } \n        return resp.json();\n      });\n}\n\nexport default {fetchBookById};","import API from './fetchTopBooks';\nimport AP from './fetchbyid';\n\nconst refs={\n    ul: document.querySelector('.books-list'),\n    closeModalBtn: document.querySelector('[data-action=\"close-modal\"]'),\n    backdrop: document.querySelector('.js-backdrop'),\n}\n\nconsole.log(refs.closeModalBtn);\nconsole.log(refs.backdrop);\n\nrefs.ul.addEventListener('click',onClickItemGalleryBooks);\n//refs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\n\nAPI.fetchTopBooks().then(createMarkupGalleryBooks);\n//.catch(err=>console.log('Ooops! Something went wrong!'));;\n\nfunction createMarkupGalleryBooks(arr) {\n    console.log('createMarkupGalleryBooks',arr);\n    console.log(arr[0].books[0]);\n    const markup=arr[0].books.map(\n        ({\n        _id,\n        book_image,\n        book_image_width,\n        book_image_height,\n        }) =>\n        `<li ><div class=\"thumb\"><img class=\"gallery__image\" src=\"${book_image}\" alt=\"\" width=\"${book_image_width}px\" height=\"${book_image_height}px\" data-source=\"${_id}\"/><div></li>`\n      )\n      .join(\"\");\n      console.log(markup);\n      refs.ul.innerHTML=markup;\n }\n\nfunction onClickItemGalleryBooks(event){\n    event.preventDefault();\n\n    const isImageGalleryEl=event.target.classList.contains('gallery__image');\n    if(!isImageGalleryEl){\n        return;\n    }\n    console.log(event.target.dataset.source);\n    openGalleryItemInModal(event.target.dataset.source);\n}\n\nfunction openGalleryItemInModal(idBook){\n    console.log('openGalleryItemInModal');\n\n    AP.fetchBookById(idBook).then(res=>console.log(res))\n    .catch(err=>console.log('Ooops! Something went wrong!'));\n\n    onOpenModal();\n\n}\n\n\nfunction onOpenModal() {\n    window.addEventListener('keydown', onEscKeyPress);\n    document.body.classList.add('show-modal');\n\n    console.log('onOpenModal');\n\n\n}\n  \n  function onCloseModal() {\n    window.removeEventListener('keydown', onEscKeyPress);\n    document.body.classList.remove('show-modal');\n  }\n  \n  function onBackdropClick(event) {\n    if (event.currentTarget === event.target) {\n      console.log('Кликнули именно в бекдроп!!!!');\n      onCloseModal();\n    }\n  }\n  \n  function onEscKeyPress(event) {\n    const ESC_KEY_CODE = 'Escape';\n    const isEscKey = event.code === ESC_KEY_CODE;\n  \n    if (isEscKey) {\n      onCloseModal();\n    }\n  }\n  \n\n"],"names":["$c720313633102759$export$2e2bcd8739ae039","fetchTopBooks","fetch","concat","then","resp","ok","Error","statusText","json","$7924b1d3a8fb207f$export$2e2bcd8739ae039","fetchBookById","idBook","$b8f9b7833fa37166$var$refs","ul","document","querySelector","closeModalBtn","backdrop","$b8f9b7833fa37166$var$onCloseModal","window","removeEventListener","$b8f9b7833fa37166$var$onEscKeyPress","body","classList","remove","event","code","console","log","addEventListener","preventDefault","target","contains","dataset","source","res","catch","err","add","currentTarget","arr","books","markup","map","param","_id","book_image","book_image_width","book_image_height","join","innerHTML"],"version":3,"file":"index.0fc46824.js.map"}