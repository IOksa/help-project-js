{"mappings":"IAYAA,EAAe,C,cAVf,WACI,OAAOC,MAAM,uDACZC,MAAMC,IACH,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAEvB,OAAOH,EAAKI,MAAM,G,OCI1BC,EAAe,C,cAVf,SAAuBC,GACnB,OAAOR,MAAM,8CAAeQ,KAC3BP,MAAMC,IACH,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAEvB,OAAOH,EAAKI,MAAM,G,GCL1B,MAAMG,EAAK,CACPC,GAAIC,SAASC,cAAc,eAC3BC,cAAeF,SAASC,cAAc,+BACtCE,SAAUH,SAASC,cAAc,iBA8DnC,SAASG,IACPC,OAAOC,oBAAoB,UAAWC,GACtCP,SAASQ,KAAKC,UAAUC,OAAO,a,CAUjC,SAASH,EAAcI,GACA,WACJA,EAAMC,MAGrBR,G,CA5ENS,QAAQC,IAAIhB,EAAKI,eACjBW,QAAQC,IAAIhB,EAAKK,UAEjBL,EAAKC,GAAGgB,iBAAiB,SAyBzB,SAAiCJ,GAC7BA,EAAMK,iBAGN,IADuBL,EAAMM,OAAOR,UAAUS,SAAS,kBAEnD,OAEJL,QAAQC,IAAIH,EAAMM,OAAOE,QAAQC,QAILvB,EAHLc,EAAMM,OAAOE,QAAQC,OAI5CP,QAAQC,IAAI,0BAEZlB,EAAGyB,cAAcxB,GAAQP,MAAKgC,GAAKT,QAAQC,IAAIQ,KAC9CC,OAAMC,GAAKX,QAAQC,IAAI,kCAQxBT,OAAOU,iBAAiB,UAAWR,GACnCP,SAASQ,KAAKC,UAAUgB,IAAI,cAE5BZ,QAAQC,IAAI,eAfhB,IAAgCjB,C,IAlChCC,EAAKK,SAASY,iBAAiB,SA2D7B,SAAyBJ,GACnBA,EAAMe,gBAAkBf,EAAMM,SAChCJ,QAAQC,IAAI,iCACZV,I,IA3DNhB,EAAIuC,gBAAgBrC,MAGpB,SAAkCsC,GAC9Bf,QAAQC,IAAI,2BAA2Bc,GACvCf,QAAQC,IAAIc,EAAI,GAAGC,MAAM,IACzB,MAAMC,EAAOF,EAAI,GAAGC,MAAME,KACtB,EAACC,IACDA,EAAGC,WACHA,EAAUC,iBACVA,EAAgBC,kBAChBA,KAEA,4DAA4DF,oBAA6BC,gBAA+BC,qBAAqCH,mBAE9JI,KAAK,IACNvB,QAAQC,IAAIgB,GACZhC,EAAKC,GAAGsC,UAAUP,C","sources":["src/fetchTopBooks.js","src/fetchbyid.js","src/index.js"],"sourcesContent":["const BASE_URL='https://books-backend.p.goit.global/books/top-books';\n\nfunction fetchTopBooks(){\n    return fetch(`${BASE_URL}`)\n    .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(resp.statusText);\n        } \n        return resp.json();\n      });\n}\n\nexport default {fetchTopBooks};","const BASE_URL='https://books-backend.p.goit.global/books/';\n\nfunction fetchBookById(idBook){\n    return fetch(`${BASE_URL}/${idBook}`)\n    .then((resp) => {\n        if (!resp.ok) {\n          throw new Error(resp.statusText);\n        } \n        return resp.json();\n      });\n}\n\nexport default {fetchBookById};","import API from './fetchTopBooks';\nimport AP from './fetchbyid';\n\nconst refs={\n    ul: document.querySelector('.books-list'),\n    closeModalBtn: document.querySelector('[data-action=\"close-modal\"]'),\n    backdrop: document.querySelector('.js-backdrop'),\n}\n\nconsole.log(refs.closeModalBtn);\nconsole.log(refs.backdrop);\n\nrefs.ul.addEventListener('click',onClickItemGalleryBooks);\n//refs.closeModalBtn.addEventListener('click', onCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\n\nAPI.fetchTopBooks().then(createMarkupGalleryBooks);\n//.catch(err=>console.log('Ooops! Something went wrong!'));;\n\nfunction createMarkupGalleryBooks(arr) {\n    console.log('createMarkupGalleryBooks',arr);\n    console.log(arr[0].books[0]);\n    const markup=arr[0].books.map(\n        ({\n        _id,\n        book_image,\n        book_image_width,\n        book_image_height,\n        }) =>\n        `<li ><div class=\"thumb\"><img class=\"gallery__image\" src=\"${book_image}\" alt=\"\" width=\"${book_image_width}px\" height=\"${book_image_height}px\" data-source=\"${_id}\"/><div></li>`\n      )\n      .join(\"\");\n      console.log(markup);\n      refs.ul.innerHTML=markup;\n }\n\nfunction onClickItemGalleryBooks(event){\n    event.preventDefault();\n\n    const isImageGalleryEl=event.target.classList.contains('gallery__image');\n    if(!isImageGalleryEl){\n        return;\n    }\n    console.log(event.target.dataset.source);\n    openGalleryItemInModal(event.target.dataset.source);\n}\n\nfunction openGalleryItemInModal(idBook){\n    console.log('openGalleryItemInModal');\n\n    AP.fetchBookById(idBook).then(res=>console.log(res))\n    .catch(err=>console.log('Ooops! Something went wrong!'));\n\n    onOpenModal();\n\n}\n\n\nfunction onOpenModal() {\n    window.addEventListener('keydown', onEscKeyPress);\n    document.body.classList.add('show-modal');\n\n    console.log('onOpenModal');\n\n\n}\n  \n  function onCloseModal() {\n    window.removeEventListener('keydown', onEscKeyPress);\n    document.body.classList.remove('show-modal');\n  }\n  \n  function onBackdropClick(event) {\n    if (event.currentTarget === event.target) {\n      console.log('Кликнули именно в бекдроп!!!!');\n      onCloseModal();\n    }\n  }\n  \n  function onEscKeyPress(event) {\n    const ESC_KEY_CODE = 'Escape';\n    const isEscKey = event.code === ESC_KEY_CODE;\n  \n    if (isEscKey) {\n      onCloseModal();\n    }\n  }\n  \n\n"],"names":["$08d2522249ac0c5c$export$2e2bcd8739ae039","fetch","then","resp","ok","Error","statusText","json","$4b9e2734a377a7d8$export$2e2bcd8739ae039","idBook","$1f0dc3b9307be026$var$refs","ul","document","querySelector","closeModalBtn","backdrop","$1f0dc3b9307be026$var$onCloseModal","window","removeEventListener","$1f0dc3b9307be026$var$onEscKeyPress","body","classList","remove","event","code","console","log","addEventListener","preventDefault","target","contains","dataset","source","fetchBookById","res","catch","err","add","currentTarget","fetchTopBooks","arr","books","markup","map","_id","book_image","book_image_width","book_image_height","join","innerHTML"],"version":3,"file":"index.0f6af01d.js.map"}